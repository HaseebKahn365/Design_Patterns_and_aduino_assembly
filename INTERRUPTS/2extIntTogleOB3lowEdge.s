
.INCLUDE "M32DEF.INC"

.ORG 0X00
    JMP MAIN
.ORG 0X02
    JMP EXT_INT0_ISR_LE

MAIN: 
    LDI R20, HIGH(RAMEND)
    OUT SPH, R20
    LDI R20, LOW(RAMEND)
    OUT SPL, R20

    //PB3 AS OUTPUT FOR LOW EDGE TRIGGERING
    SBI DDRB, 3

    //CONFIGS FOR EXTERNAL INTERRUPT 0
    SBI PORTD, 2 //PULL UP ENABLED
    LDI R20, (1<<INT0) //6TH BIT OF GICR
    OUT GICR, R20
    SEI

EXT_INT0_ISR_LE:
    //TOGGLE PINC
    IN R16, PORTC
    //TOGGLE PB3
    LDI R20M OX08
    EOR R16, R20
    OUT PORTC, R16
    RETI